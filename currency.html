<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Курс валют EGP</title>
  <link rel="shortcut icon" href="favicon.ico">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <!-- Меню -->
  <nav class="sidebar">
    <ul>
      <li><a href="index.html">О компании</a></li>
      <li><a href="news.html">Новости</a></li>
      <li><a href="currency.html">Курс валют</a></li>
      <li><a href="contacts.html">Контакты</a></li>
      <li><a href="video.html">Видео</a></li>
    </ul>
  </nav>

<div class="content">
  <h1>Курс Египетского фунта (EGP)</h1>
  <p id="rate">Загрузка курса...</p>

  <div class="calculator">
    <input type="number" id="rubles" placeholder="Рубли">
    <input type="number" id="egp" placeholder="EGP">
    <button onclick="convertToEGP()">RUB → EGP</button>
    <button onclick="convertToRUB()">EGP → RUB</button>
  </div>

  <canvas id="myChart" width="400" height="200"></canvas>
</div>
<script>
  let rate = 0;

  // Загружаем текущий курс EGP с сайта ЦБ РФ
  fetch('https://www.cbr-xml-daily.ru/daily_json.js')
    .then(response => response.json())
    .then(data => {
      rate = data.Valute.EGP.Value;
      document.getElementById('rate').innerText = `1 EGP = ${rate.toFixed(2)} RUB`;
    });

  function convertToEGP() {
    const rub = parseFloat(document.getElementById('rubles').value);
    if (!rate || isNaN(rub)) {
      alert('Введите сумму в рублях и дождитесь загрузки курса.');
      return;
    }
    document.getElementById('egp').value = (rub / rate).toFixed(2);
  }

  function convertToRUB() {
    const egp = parseFloat(document.getElementById('egp').value);
    if (!rate || isNaN(egp)) {
      alert('Введите сумму в EGP и дождитесь загрузки курса.');
      return;
    }
    document.getElementById('rubles').value = (egp * rate).toFixed(2);
  }

  // График курса (примерные данные, для замены на API потом)
  const ctx = document.getElementById('myChart').getContext('2d');
  const labels = ['01.04', '05.04', '10.04', '15.04', '20.04', '25.04', '30.04'];
  const values = [3.69, 3.71, 3.68, 3.72, 3.73, 3.70, 3.75];

  const chart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Курс EGP к RUB',
        data: values,
        backgroundColor: '#003366'
      }]
    },
    options: {
      onClick: function(event, elements) {
        if (elements.length > 0) {
          const i = elements[0].index;
          alert('Дата: ' + labels[i] + ', Курс: ' + values[i]);
        }
      },
      responsive: true,
      plugins: {
        tooltip: {
          callbacks: {
            label: function(context) {
              return `Курс: ${context.parsed.y}`;
            }
          }
        }
      },
      scales: {
        y: {
          beginAtZero: false
        }
      }
    }
  });
</script>



</body>
</html>
